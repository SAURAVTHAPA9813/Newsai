# PRODUCTION ENVIRONMENT CONFIGURATION
# Copy this to your hosting platform's environment variables section
# DO NOT commit the actual .env.production file to Git

# ===========================================
# CRITICAL: PRODUCTION SECURITY SETTINGS
# ===========================================

NODE_ENV=production
PORT=5000

# Frontend URL - Update after deploying to Vercel
# Example: https://newsai-beta.vercel.app
FRONTEND_URL=https://your-production-frontend-url.vercel.app

# ===========================================
# DATABASE - MongoDB Atlas (Free M0 Cluster)
# ===========================================
# Sign up: https://www.mongodb.com/cloud/atlas/register
# 1. Create M0 free cluster
# 2. Create database user with password
# 3. Whitelist IP: 0.0.0.0/0 (allow all for beta)
# 4. Get connection string from Connect > Drivers
MONGODB_URI=mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/newsai?retryWrites=true&w=majority

# ===========================================
# JWT AUTHENTICATION - CRITICAL SECURITY
# ===========================================
# Generate a strong secret: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# NEVER use the development JWT_SECRET in production!
JWT_SECRET=generate-a-strong-64-character-random-secret-here-using-command-above

# ===========================================
# AI SERVICES - Google Gemini (Required)
# ===========================================
# Get free API key: https://aistudio.google.com/app/apikey
# Free tier: 60 requests/minute
GEMINI_API_KEY=your-production-gemini-api-key

# ===========================================
# NEWS PROVIDERS - Get Multiple Free Keys
# ===========================================

# NewsAPI.org (Primary) - 100 req/day free
# Sign up: https://newsapi.org/register
NEWS_API_KEY=your-newsapi-production-key

# The Guardian (Recommended Backup) - 500 req/day free
# Sign up: https://open-platform.theguardian.com/access/
GUARDIAN_API_KEY=your-guardian-production-key

# NewsData.io (Good Alternative) - 200 req/day free
# Sign up: https://newsdata.io/register
NEWSDATA_API_KEY=your-newsdata-production-key

# GNews.io (Additional Backup) - 100 req/day free
# Sign up: https://gnews.io/register
GNEWS_API_KEY=your-gnews-production-key

# Currents API (Last Resort) - 600 req/day free
# Sign up: https://currentsapi.services/en/register
CURRENTS_API_KEY=your-currents-production-key

# ===========================================
# OPTIONAL: Multi-Key Setup for Higher Limits
# ===========================================
# For 100 users beta, multi-key setup is HIGHLY RECOMMENDED
# Sign up for multiple free accounts with different emails

# NewsData.io Multi-Key (Best free tier)
NEWSDATA_PRIMARY_TECH=your-tech-key
NEWSDATA_PRIMARY_FINANCE=your-finance-key
NEWSDATA_PRIMARY_HEALTH=your-health-key
NEWSDATA_PRIMARY_GENERAL=your-general-key

# ===========================================
# OPTIONAL: Error Tracking (Recommended)
# ===========================================
# Sentry - 5000 events/month free
# Sign up: https://sentry.io/signup/
SENTRY_DSN=your-sentry-production-dsn

# ===========================================
# OPTIONAL: Market Data
# ===========================================
# Finnhub - 60 req/min free
# Sign up: https://finnhub.io/register
FINNHUB_API_KEY=your-finnhub-production-key

# ===========================================
# DEPLOYMENT CHECKLIST
# ===========================================
# [ ] Generate strong JWT_SECRET (use command above)
# [ ] Set up MongoDB Atlas M0 cluster
# [ ] Get Gemini API key
# [ ] Get at least 2 news provider API keys
# [ ] Set FRONTEND_URL after Vercel deployment
# [ ] Set up Sentry for error tracking
# [ ] Test all environment variables are set correctly
# [ ] Never commit this file to Git!

# ===========================================
# HOSTING PLATFORM INSTRUCTIONS
# ===========================================

# --- Render.com (Backend) ---
# 1. Create new Web Service
# 2. Connect GitHub repository
# 3. Build Command: cd server && npm install
# 4. Start Command: cd server && npm start
# 5. Add all environment variables above in Render dashboard
# 6. Free tier sleeps after 15min inactivity (acceptable for beta)

# --- Vercel (Frontend) ---
# 1. Import GitHub repository
# 2. Framework: Vite
# 3. Build Command: npm run build
# 4. Output Directory: dist
# 5. Add these environment variables:
#    VITE_API_URL=https://your-backend.onrender.com
#    VITE_APP_ENV=production
#    VITE_SENTRY_DSN=your-sentry-frontend-dsn

# ===========================================
# IMPORTANT NOTES FOR BETA DEPLOYMENT
# ===========================================
# 1. Free tier limitations:
#    - Render: Server sleeps after 15min â†’ ~30s cold start
#    - MongoDB: 512MB storage (~10,000 articles max)
#    - News APIs: Cache aggressively (15-20min) to stay within limits
#    - Gemini: 60 req/min (should be enough for 100 users)
#
# 2. Monitor these daily during beta:
#    - API usage (check provider dashboards)
#    - MongoDB storage (check Atlas dashboard)
#    - Error rates (check Sentry)
#    - Server health (check Render logs)
#
# 3. Communicate to beta users:
#    - First load may be slow (cold start)
#    - News updates cached 15-20 minutes
#    - This is a beta with free-tier limitations
